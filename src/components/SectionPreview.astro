---
interface Entry {
  id: string;
  data: {
    title: string;
    date?: Date;
    summary?: string;
    description?: string;
    tags?: string[];
  };
}

interface Props {
  title: string;
  accent: 'green' | 'cyan' | 'purple';
  href: string;
  entries: Entry[];
  basePath: string;
}

const { title, accent, href, entries, basePath } = Astro.props;

const accentColors = {
  green: {
    dot: 'text-neon-green',
    title: 'text-neon-green',
    titleHover: 'group-hover:text-neon-green',
    cardGlow: 'card-glow-green',
    borderLeft: 'border-l-neon-green/40',
    tagDot: 'tag-dot-green',
    link: 'hover:text-neon-green hover:border-neon-green/30',
  },
  cyan: {
    dot: 'text-neon-cyan',
    title: 'text-neon-cyan',
    titleHover: 'group-hover:text-neon-cyan',
    cardGlow: 'card-glow-cyan',
    borderLeft: 'border-l-neon-cyan/40',
    tagDot: 'tag-dot-cyan',
    link: 'hover:text-neon-cyan hover:border-neon-cyan/30',
  },
  purple: {
    dot: 'text-neon-purple',
    title: 'text-neon-purple',
    titleHover: 'group-hover:text-neon-purple',
    cardGlow: 'card-glow-purple',
    borderLeft: 'border-l-neon-purple/40',
    tagDot: 'tag-dot-purple',
    link: 'hover:text-neon-purple hover:border-neon-purple/30',
  },
};

const colors = accentColors[accent];
---

<section class="max-w-5xl mx-auto px-6 py-10">
  <div class="flex items-center justify-between mb-6">
    <h2 class="font-mono text-lg font-bold text-text-bright flex items-center gap-2">
      <span class={colors.dot}>&#9632;</span>
      {title}
    </h2>
    <a
      href={href}
      class={`font-mono text-xs text-text-muted ${colors.link} transition-colors border-b border-transparent`}
    >
      view all &rarr;
    </a>
  </div>

  {entries.length === 0 ? (
    <div class="bg-surface border border-surface-light rounded-lg p-6 text-center">
      <p class="font-mono text-sm text-text-muted">
        <span class={colors.dot}>&#9679;</span> awaiting first transmission...
      </p>
    </div>
  ) : (
    <div class="grid gap-5">
      {entries.map((entry, index) => (
        <a
          href={`${basePath}/${entry.id}`}
          class={`block relative glass-card rounded-xl p-6 card-glow ${colors.cardGlow} card-lift group animate-stagger border-l-2 ${colors.borderLeft} overflow-hidden`}
          style={`--stagger-index: ${index}`}
        >
          <div class="flex items-start justify-between gap-4">
            <div class="min-w-0">
              <h3 class={`font-mono text-base font-bold text-text-bright ${colors.titleHover} transition-colors truncate`}>
                {entry.data.title}
              </h3>
              <p class="text-sm text-text-muted mt-2 leading-relaxed line-clamp-2">
                {entry.data.summary || entry.data.description}
              </p>
            </div>
            {entry.data.date && (
              <time
                datetime={entry.data.date.toISOString()}
                class="font-mono text-xs text-text-muted shrink-0"
              >
                {entry.data.date.toLocaleDateString('en-GB', { day: '2-digit', month: 'short' })}
              </time>
            )}
          </div>
          {entry.data.tags && entry.data.tags.length > 0 && (
            <div class="flex flex-wrap gap-2 mt-4">
              {entry.data.tags.map((tag) => (
                <span class="tag-badge">
                  <span class={`tag-dot ${colors.tagDot}`}></span>
                  {tag}
                </span>
              ))}
            </div>
          )}
        </a>
      ))}
    </div>
  )}
</section>
